# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Задание

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информацию о сбое можно изучить по ссылкам ниже:

* [краткое описание на русском языке](https://habr.com/ru/post/427301/);
* [развёрнутое описание на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

## Решение:

### Постмортем инцидента, затронувшего сервисы GitHub 21 и 22 октября
| Название | Описание |
|-----|-----|
**Краткое описание инцидента** | 21.10.2018 в 22:52 (UTC) в результате краткосрочного отсутствия доступа к ЦОД на восточном побережье США, произошел сбой базы данных, что привело к несогласованности информации, представленной на веб-сайте
**Предшествующие события** | 21 октября в 22:52 (UTC) проводились плановые работы по техническому обслуживанию по замене вышедшего из строя оптического оборудования 100G
**Причина инцидента** | Краткосрочное отсутствие связи между сетевым концентратором на восточном побережье США и основным центром обработки данных на восточном побережье США
**Воздействие** | Несогласованность данных в разных ЦОД. Отсуствие возможности обслуживать события веб-перехватчиков или создавать и публиковать GitHub Pages
**Обнаружение** | В 23:02 (UTC) на основе предупреждений систем мониторинга инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных находятся в непредвиденном состоянии
**Реакция** | Связь между точками была восстановлена за 43 секунды, но этот сбой вызвал цепочку событий, которые привели к ухудшению качества обслуживания на 24 часа 11 минут
**Восстановление** | Восстановлены из резервных копий данные MySQL, синхронизированы реплики на обоих сайтах, произведён возврат к стабильной топологии обслуживания, возобновлена обработка заданий в очереди. Последующий анализ журналов MySQL для определения, восстановление каких записей может потребовать взаимодействия с пользователями.
**Таймлайн** | **21 октября 22:52 (UTC)** во время отсутствия связи с ЦОД на восточном побережье США, Orchestrator, который был активен в основном ЦОД, начал процесс отмены выбора руководства. Серверы баз данных в ЦОД на восточном побережье США содержали период записей, которые не были реплицированы на объект на западном побережье США. <br /> **21 октября 22:52 (UTC)** Аварийное переключение кластеров для направления операций записи в ЦОД на западном побережье США <br /> **21 октября 22:54 (UTC)** Системы мониторинга начали генерировать предупреждения, указывающие на многочисленные сбои в системах <br /> **21 октября 23:07 (UTC)** Команда решила вручную заблокировать внутренний инструмент развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений <br /> **21 октября 23:13 (UTC)** Были вызваны дополнительные инженеры из группы разработки баз данных GitHub <br /> **21 октября 23:19 (UTC)**  Приостановка доставки веб-перехватчика и сборки страниц GitHub <br /> **22 октября 00:05 (UTC)** Разработка плана по устранению несоответствий данных и внедрения процедур аварийного переключения для MySQL <br /> **22 октября 00:41 (UTC)** Инициирован процесс резервного копирования для всех затронутых кластеров MySQL <br /> **22 октября 06:51 (UTC)** Несколько кластеров завершили восстановление из резервных копий в центре обработки данных на восточном побережье США и начали репликацию новых данных с западного побережья <br /> **22 октября 07:46 (UTC)** GitHub опубликовал сообщение в блоге, чтобы предоставить больше информации <br /> **22 октября 11:12 (UTC)** Все первичные базы данных снова установлены на восточном побережье США <br /> **22 октября 13:15 (UTC)** Стали приближаться к пиковой нагрузке трафика на GitHub.com <br /> **22 октября 16:24 (UTC)** Выполнено аварийное переключение на исходную топологию, решив проблемы с задержкой/доступностью <br /> **22 октября 16:45 (UTC)** Балансировка возросшей нагрузки, созданной отставанием  <br /> **22 октября 23:03 (UTC)** Все задачи ожидающие сборки вебхуков и страниц были обработаны, и была подтверждена целостность и правильная работа всех систем
**Последующие действия** | 1. Настройка конфигурации Orchestrator, чтобы предотвратить повторения произошедшего инцидента. <br /> 2. Ускорение перехода на новый механизм отчетности о статусе, который предоставит более обширную площадку для обсуждения активных инцидентов более четким и понятным языком. <br /> 3. Внедрение систематической практики проверки сценариев неудач до момента их наступления.
